<p-card header="Editar Produto">
    <form class="form-container" [formGroup]="productForm" (ngSubmit)="onSubmit()">
        <div class="row">
            <div class="inputFloatLabel">
                <p-floatLabel>
                    <input type="text" id="name" pInputText formControlName="name">
                    <label for="name">Nome do produto</label>
                </p-floatLabel>
                <small class="error-message" *ngIf="productForm.get('name')?.errors && productForm.get('name')?.touched">
                    * O nome do produto é obrigatório
                </small>
            </div>
            <div class="inputFloatLabel">
                <p-floatLabel>
                    <p-dropdown 
                    [options]="categories" 
                    [showClear]="true"
                    [(ngModel)]="selectedCategory"
                    optionLabel="name"
                    formControlName="category"/>
                    <label for="category">Categoria</label>
                </p-floatLabel>
                <small class="error-message" *ngIf="productForm.get('category')?.errors && productForm.get('category')?.touched">
                    * A categoria do produto é obrigatória
                </small>
            </div>
            <div class="inputFloatLabel">
                <p-floatLabel>
                    <p-inputNumber 
                    id="weight" 
                    suffix="kg" 
                    [showButtons]="true"
                    [min]="0.01"
                    [minFractionDigits]="2"
                    [maxFractionDigits]="3"
                    incrementButtonClass="p-button-secondary"
                    decrementButtonClass="p-button-secondary"
                    formControlName="weight"/>
                    <label for="weight">Peso do produto</label>
                </p-floatLabel>
                <small class="error-message" *ngIf="productForm.get('weight')?.hasError('required') && productForm.get('weight')?.touched">
                    * O peso do produto é obrigatório
                </small>
                <small class="error-message" *ngIf="productForm.get('weight')?.hasError('min') && productForm.get('weight')?.touched">
                    O peso mínimo é 0.01kg
                </small>
            </div>
            <div class="inputFLoatLabel">
                <p-floatLabel>
                    <p-calendar 
                    id="manufacDate" 
                    formControlName="manufacDate" 
                    dateFormat="dd.mm.yy" 
                    [readonlyInput]="true" 
                    [showIcon]="true" 
                    [iconDisplay]="'input'"/>
                    <label for="manufacDate">Data de fabricação</label>
                </p-floatLabel>
                <small class="error-message" *ngIf="productForm.get('manufacDate')?.errors && productForm.get('manufacDate')?.touched">
                    * A data de fabricação é obrigatória
                </small>
            </div>
            <div class="inputFloatLabel">
                <p-floatLabel>
                    <p-calendar 
                    id="dueDate" 
                    formControlName="dueDate" 
                    dateFormat="dd.mm.yy" 
                    [readonlyInput]="true" 
                    [showIcon]="true" 
                    [iconDisplay]="'input'"/>
                    <label for="dueDate">Data de vencimento</label>
                </p-floatLabel>
                <small class="error-message" *ngIf="productForm.get('dueDate')?.hasError('required') && productForm.get('dueDate')?.touched">
                    * A data de vencimento é obrigatória
                </small>
                <small class="error-message" *ngIf="productForm.get('dueDate')?.hasError('invalidDateComparison') && productForm.get('dueDate')?.touched">
                    A data de vencimento não pode ser anterior à data de fabricação
                </small>
            </div>
        </div>
        <div class="row">
            <div class="inputFloatLabel">
                <p-floatLabel>
                    <p-dropdown 
                        [options]="unitsOfMeasurement" 
                        [showClear]="true"
                        formControlName="unitMeasurement">
                    </p-dropdown>
                    <label for="unitMeasurement">Unidade de medida</label>
                </p-floatLabel>
                <small class="error-message" *ngIf="productForm.get('unitMeasurement')?.errors && productForm.get('unitMeasurement')?.touched">
                    * A unidade de medida é obrigatória
                </small>
            </div>
            <div class="inputFloatLabel">
                <p-floatLabel>
                    <p-dropdown 
                    [options]="packingTypes" 
                    [showClear]="true"
                    formControlName="packingType"/>
                    <label for="packingType">Tipo de embalagem</label>
                </p-floatLabel>
                <small class="error-message" *ngIf="productForm.get('packingType')?.errors && productForm.get('packingType')?.touched">
                    * O tipo de embalagem é obrigatório
                </small>
            </div>
            <div class="inputFloatLabel">
                <p-floatLabel>
                    <input type="text" pInputText formControlName="batchNumber" id="batchNumber">
                    <label for="batchNumber">Nº de lote</label>
                </p-floatLabel>
                <small class="error-message" *ngIf="productForm.get('batchNumber')?.errors && productForm.get('batchNumber')?.touched">
                    * O número de lote é obrigatório
                </small>
            </div>
            <div class="inputFloatLabel">
                <p-floatLabel>
                    <p-inputNumber 
                    id="quantity" 
                    mode="decimal" 
                    [showButtons]="true" 
                    [min]="0"
                    incrementButtonClass="p-button-secondary"
                    decrementButtonClass="p-button-secondary"
                    formControlName="quantity"/>
                    <label for="quantity">Quantidade</label>
                </p-floatLabel>
                <small class="error-message" *ngIf="productForm.get('quantity')?.errors && productForm.get('quantity')?.touched">
                    * A quantidade do produto é obrigatória
                </small>
            </div>
            <div class="inputFloatLabel">
                <p-floatLabel>
                    <p-inputNumber
                    [showButtons]="true"
                    mode="currency"
                    currency="BRL"
                    [min]="0"
                    incrementButtonClass="p-button-secondary"
                    decrementButtonClass="p-button-secondary"
                    id="price"
                    formControlName="price"/>
                    <label for="price">Preço do produto</label>
                </p-floatLabel>
                <small class="error-message" *ngIf="productForm.get('price')?.hasError('required') && productForm.get('price')?.touched">
                    * O preço do produto é obrigatório
                </small>
            </div>
        </div>
        <div class="row">
            <div class="inputFloatLabel">
                <p-floatLabel>
                    <p-dropdown 
                    [options]="suppliers" 
                    [showClear]="true"
                    optionLabel="name"
                    [(ngModel)]="selectedSupplier"
                    formControlName="supplier"/>
                    <label for="supplier">Fornecedor</label>
                </p-floatLabel>
                <small class="error-message" *ngIf="productForm.get('supplier')?.errors && productForm.get('supplier')?.touched">
                    * O fornecedor do produto é obrigatório
                </small>
            </div>
            <div class="inputFloatLabel">
                <p-floatLabel>
                    <textarea id="description" class="textarea" rows="5" cols="50" pInputTextarea formControlName="description"></textarea>
                    <label for="description">Descrição do produto</label>
                </p-floatLabel>
                <small class="error-message" *ngIf="productForm.get('description')?.errors && productForm.get('description')?.touched">
                    * A descrição do produto é obrigatória
                </small>
            </div>
        </div>
        <div class="row">
            <button pButton type="submit" [disabled]="productForm.invalid || !enableButtons">Salvar</button>
            <button pButton severity="danger" routerLink="/produtos" [disabled]="!enableButtons">Cancelar</button>
        </div>
    </form>
</p-card>
<p-toast></p-toast>
